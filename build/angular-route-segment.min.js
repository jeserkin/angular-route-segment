/**
 * angular-route-segment 1.3.4
 * https://angular-route-segment.com
 * @author Artem Chivchalov
 * @license MIT License http://opensource.org/licenses/MIT
 */
"use strict";(function(e){var t=e.module("route-segment",[]);t.provider("$routeSegment",["$routeProvider",function(t){function u(e){return e.replace(/([\:\-\_]+(.))/g,function(e,t,n,r){return r?n.toUpperCase():n})}function a(e,t){if(!e)throw new Error("Invalid pointer segment");var n;return{segment:function(t,r){e[u(t)]={params:r};n=t;return this},within:function(t){var i;t=t||n;if(i=e[u(t)]){if(i.children==undefined)i.children={}}else{if(r.strictMode)throw new Error("Cannot get into unknown `"+t+"` segment");else{i=e[u(t)]={params:{},children:{}}}}return a(i.children,this)},up:function(){return t},root:function(){return s}}}var n=this;var r=n.options={autoLoadTemplates:true,strictMode:false};var i=this.segments={},s=a(i,null),o={};n.when=function(e,n){t.when(e,{segment:n});o[n]=e;return this};e.extend(n,s);this.$get=["$rootScope","$q","$http","$templateCache","$route","$routeParams","$injector",function(t,n,s,a,f,l,c){function d(t){var n=false;if(t.params.dependencies)e.forEach(t.params.dependencies,function(t){if(!e.equals(h.$routeParams[t],l[t]))n=true});return n}function v(e,t){if(h.chain[e]&&h.chain[e].clearWatcher){h.chain[e].clearWatcher()}if(!t){p[e]=null;g(e);return}p[e]=t.name;if(t.params.untilResolved){return m(e,t.name,t.params.untilResolved).then(function(n){if(n.success!=undefined)g(e);return m(e,t.name,t.params)})}else return m(e,t.name,t.params)}function m(i,o,u){var f=e.extend({},u.resolve);e.forEach(f,function(t,n){f[n]=e.isString(t)?c.get(t):c.invoke(t)});if(u.template){f.$template=u.template;if(e.isFunction(f.$template))f.$template=c.invoke(f.$template)}if(r.autoLoadTemplates&&u.templateUrl){f.$template=u.templateUrl;if(e.isFunction(f.$template))f.$template=c.invoke(f.$template);f.$template=s.get(f.$template,{cache:a}).then(function(e){return e.data})}return n.all(f).then(function(r){if(p[i]!=o)return n.reject();h.chain[i]={name:o,params:u,locals:r,reload:function(){var e=y(i,h.name.split("."));v(i,e).then(function(e){if(e.success!=undefined)g(i)})}};if(u.watcher){var s=function(){if(!e.isFunction(u.watcher)&&!e.isArray(u.watcher))throw new Error("Watcher is not a function in segment `"+o+"`");return c.invoke(u.watcher,{},{segment:h.chain[i]})};var a=s();h.chain[i].clearWatcher=t.$watch(s,function(e){if(e==a)return;a=e;h.chain[i].reload()})}return{success:i}},function(t){if(u.resolveFailed){var r={error:function(){return n.when(t)}};return m(i,o,e.extend({resolve:r},u.resolveFailed))}else throw new Error("Resolving failed with a reason `"+t+"`, but no `resolveFailed` "+"provided for segment `"+o+"`")})}function g(n){h.$routeParams=e.copy(l);h.name="";for(var r=0;r<h.chain.length;r++)if(h.chain[r])h.name+=h.chain[r].name+".";h.name=h.name.substr(0,h.name.length-1);t.$broadcast("routeSegmentChange",{index:n,segment:h.chain[n]||null})}function y(e,t){if(!t)return null;if(e>=t.length)return null;var n=i,r;for(var s=0;s<=e;s++){r=t[s];if(n[u(r)]!=undefined)n=n[u(r)];if(s<e)n=n.children}return{name:r,params:n.params,children:n.children}}var h={name:"",$routeParams:e.copy(l),chain:[],startsWith:function(e){var t=new RegExp("^"+e);return t.test(h.name)},contains:function(e){for(var t=0;t<this.chain.length;t++)if(this.chain[t]&&this.chain[t].name==e)return true;return false},getSegmentUrl:function(t,n){var r,i,s;if(!o[t])throw new Error("Can not get URL for segment with name `"+t+"`");n=e.extend({},l,n||{});r=o[t];for(i in n){var u=new RegExp(":"+i+"[*?]?","g");r=r.replace(u,n[i])}r=r.replace(/\/\:.*?\?/g,"");if(s=r.match(/\/\:([^\/]*)/))throw new Error("Route param `"+s[1]+"` is not specified for route `"+o[t]+"`");return r},getRawSegmentUrl:function(e){if(!o[e])throw new Error("Can not get URL for segment with name `"+e+"`");return o[e]}};var p={};t.$on("$routeChangeSuccess",function(e,t){var r=t.$route||t.$$route;if(r&&r.segment){var i=r.segment;var s=i.split(".");var o=[],u=-1;for(var a=0;a<s.length;a++){var f=y(a,s);if(p[a]!=f.name||o.length>0||d(f)){if(h.chain[a]&&h.chain[a].name==f.name&&o.length==0&&!d(f))p[a]=f.name;else{o.push({index:a,newSegment:f});u=a}}}var l=n.when();if(o.length>0){for(var a=0;a<o.length;a++){(function(e){l=l.then(function(){return v(o[e].index,o[e].newSegment)}).then(function(t){if(t.success!=undefined){g(t.success);for(var n=o[e].index+1;n<h.chain.length;n++){if(h.chain[n]){h.chain[n]=null;v(n,null)}}}})})(a)}}l.then(function(){if(h.chain.length>s.length){var e=h.chain.length;var t=h.chain.length-s.length;h.chain.splice(-t,t);for(var n=s.length;n<e;n++){v(n,null);u=h.chain.length-1}}}).then(function(){var e=n.when();if(u==h.chain.length-1){var t=y(u,h.name.split("."));while(t){var r=t.children,i=u+1;t=null;for(var s in r){(function(n,r,i){if(r[n].params["default"]){e=e.then(function(){return v(i,{name:n,params:r[n].params}).then(function(e){if(e.success)g(e.success)})});t=r[n];u=i}})(s,r,i)}}}return e})}});return h}]}]);t.filter("routeSegmentUrl",["$routeSegment",function(e){var t=function(t,n){return e.getSegmentUrl(t,n)};t.$stateful=true;return t}]);t.filter("routeRawSegmentUrl",["$routeSegment",function(e){var t=function(t){return e.getRawSegmentUrl(t)};t.$stateful=true;return t}]);t.filter("routeSegmentEqualsTo",["$routeSegment",function(e){var t=function(t){return e.name==t};t.$stateful=true;return t}]);t.filter("routeSegmentStartsWith",["$routeSegment",function(e){var t=function(t){return e.startsWith(t)};t.$stateful=true;return t}]);t.filter("routeSegmentContains",["$routeSegment",function(e){var t=function(t){return e.contains(t)};t.$stateful=true;return t}]);t.filter("routeSegmentParam",["$routeSegment",function(e){var t=function(t){return e.$routeParams[t]};t.$stateful=true;return t}])})(angular);"use strict";(function(e){e.module("view-segment",["route-segment"]).directive("appViewSegment",["$route","$compile","$controller","$routeParams","$routeSegment","$q","$injector","$timeout",function(t,n,r,i,s,o,u,a){return{restrict:"ECA",priority:500,compile:function(t,i){var o=t.html(),f=true,l=e.element(document.createComment(" view-segment "));t.prepend(l);return function(c){function E(){if(p){m.leave(p);p=null}if(h){h.$destroy();h=null}}function S(i){d=i;if(f){f=false;t.replaceWith(l)}if(!i){E();p=t.clone();p.html(o);m.enter(p,null,l);n(p,false,499)(c);return}var s=e.extend({},i.locals),u=s&&s.$template;E();p=t.clone();p.html(u?u:o);m.enter(p,null,l);var a=n(p,false,499),g;h=c.$new();if(i.params.controller){s.$scope=h;g=r(i.params.controller,s);if(i.params.controllerAs)h[i.params.controllerAs]=g;p.data("$ngControllerController",g);p.children().data("$ngControllerController",g)}a(h);h.$emit("$viewContentLoaded");h.$eval(v)}var h,p,d,v=i.onload||"",m,g=parseInt(i.appViewSegment),y;try{var b=u.get("$animator");m=b(c,i)}catch(w){}try{m=u.get("$animate")}catch(w){}if(s.chain[g])y=a(function(){S(s.chain[g])},0);c.$on("routeSegmentChange",function(e,t){if(y)a.cancel(y);if(t.index==g&&d!=t.segment)S(t.segment)})}}}}])})(angular)